\chapter{Condiciones de recepción y pruebas}
n este apartado se definen las condiciones que se deben verificar en la entrega del proyecto. Se han definido una serie de pruebas que deben ser realizadas para proceder a la verificación de los desarrollos y comprobar el correcto cumplimiento de las especificaciones recogidas en el documento de Memoria.

Las pruebas aquí recogidas constituyen la base para la aceptación del sistema, dejando al criterio del personal encargado del desarrollo la elaboración de otras pruebas adicionales.

\section{Derechos de explotación sobre el producto}
La herramienta que se desarrolle como resultado del proyecto será propiedad del diseñador, Javier Domingo. La propiedad intelectual y el derecho al uso de la herramienta que se desarrolle, pertenecerá exclusivamente a Javier Domingo, respetándose el derecho moral del equipo investigador a ser designado como co-autores de los desarrollos.

El diseño y el proyecto en general se ha licenciado con una licencia CC-BY-NC-SA. Se puede consultar esta licencia íntegramente en \cite{CBSN13}. Las partes de código que se han utilizado a modo explicativo y el código asociado al mismo está licenciado bajo la licencia GPLv3 \cite{GPLV3}.

El cliente se puede reservar el derecho a no distribuir el proyecto o el módulo, pero en caso de hacerlo, deberá hacerlo conforme a las citadas licencias.

\section{Entorno de pruebas}
Las pruebas se realizarán en el marco del proyecto de continuación planteado. La ubicación de las pruebas, por tanto está todavía por definir.

\subsection{Materiales necesarios}
Dentro de los materiales necesarios para la realización de las pruebas se distinguirá el material hardware del software. En cuanto al hardware, los elementos necesarios son los siguientes:
\begin{itemize}
\item Un ordenador con una DAG \cite{DAPR10} que se utilizará como inyector.
\item Un ordenador personal que se utilizará para capturar las trazas inyectadas.
\item Un switch que conecta ambos ordenadores.
\end{itemize}

En lo relativo al software, serán necesarios dos sistemas Debian GNU/Linux, donde uno de ellos controlará el inyector hardware que inserta las trazas de tráfico configuradas, y el otro capturará las trazas inyectadas para su posterior análisis.

\subsection{Personal necesario}
En lo referente al personal, serán necesarios los siguientes perfiles:
\begin{itemize}
\item Un director de proyecto que supervise el desarrollo de las pruebas.
\item Un ingeniero de diseño que verifique el diseño del sistema.
\item Un programador que comprueba el correcto funcionamiento del software.
\end{itemize}

\section{Pruebas de validación}
En este apartado se especifican las pruebas a las que debe ser sometido el prototipo para la verificación de su correcto funcionamiento y la validación de los trabajos realizados. Como ya se ha indicado anteriormente estas pruebas se realizarán sobre el prototipo que se implementa en el proyecto de continuación propuesto. En dicho proyecto se ha incluido en el plan de trabajo un paquete de trabajo para realizar estas pruebas.


\subsection{Prueba del interfaz de usuario}
\subsubsection{Propósito}
Comprobar que el interfaz de los módulos hacia el usuario es capaz de mostrar datos por el sistema de ficheros procfs. El usuario deberá además, poder cargar y descargar el módulo, y los datos deberán ser reseteados en el proceso automáticamente.

\subsubsection{Procedimiento}
Se iniciará la máquina, y se cargarán los módulos uno a uno comprobando que las estadísticas o trazas se van actualizando. Cuando se haya comprobado que los datos tienen el formato de salida especificado por el programador, y contienen los datos especificados en el diseño, se descargará uno a uno, y se volverán a cargar, comprobando que en la recarga, los datos se han reiniciado a cero.

\subsubsection{Conclusión de la prueba}
La prueba se dará por finalizada cuando se haya asegurado que el procedimiento de carga y descarga tiene los efectos descritos en el sistema, y además, la interfaz hacia el usuario es tal y como se ha descrito.

\subsection{Prueba del demonio}
\subsubsection{Propósito}
Comprobar que el demonio diseñado recibe y devuelve correctamente los datos especificados a la arquitectura.

\subsubsection{Procedimiento}
Se inicia una prueba de la arquitectura, y se comprueba que todas las partes del proyecto devuelven sus correspondientes datos. Además, debe comprobarse que entre dos pruebas, no queda ningún dato en la sonda.

\subsubsection{Conclusión de la prueba}
La prueba se da por concluida cuando se comprueba que la arquitectura recibe correctamente los parámetros.

\subsection{Pruebas del módulo de trazas}
\subsubsection{Objetivo}
Comprobar que las mediciones realizadas por el traceador tienen sentido y concordancia con el resto de parámetros medidos por otros medios.

\subsubsection{Procedimiento}
Se inyectará tráfico, donde se verán el número total de paquetes capturados que se reflejen en las estadísticas del sistema, y se comprobará que estos concuerdan con el sumatorio de los paquetes capturados en softirqs.

\subsubsection{Conclusión de la prueba}
La prueba concluye cuando se ha inyectado un número suficiente de datos que aseguran que no haya posibles errores en la medición.

\subsection{Prueba del módulo de estadísticas}
\subsubsection{Propósito}
Comprobar la correcta generación de las trazas de inyección: paquetes y datos de inyección.

\subsubsection{Procedimiento}
En primer lugar, se le pasa al módulo de kernel los datos de inyección desde espacio de
usuario. Se comprueba que han sido correctamente almacenados en espacio de kernel.
El módulo generará los paquetes de datos. Hay que comprobar que se han generado de
manera correcta y que están correctamente almacenados. También hay que comprobar
que el array de datos de gestión está correctamente inicializado, actualizado y que es
accesible desde otros módulos de kernel.

\subsubsection{Conclusión}
Esta prueba no finaliza hasta que no se generen flujos suficientes para agotar la
memoria de kernel y que el módulo de gestión tenga que avisar de que no hay espacio,
antes de machar información.

\subsection{Prueba de módulo de inyección}
Propósito:

Comprobar que se realiza de manera correcta una inyección.
Procedimiento:
Se programa una inyección desde espacio de usuario pasando los parámetros adecuados.
Se comprueba que se realiza un acceso correcto a los arrays correspondientes para
obtener la información. Para esta prueba, hay que capturar la información inyectada en
otra máquina para comprobar que el tráfico está correctamente modelado.
Conclusión de la prueba:
Esta prueba no termina hasta que no se compruebe el correcto funcionamiento del
inyector.

\subsection{Prueba de validación global}
Propósito:
Comprobar el correcto funcionamiento del prototipo y la correcta interacción de todos
los módulos.
Procedimiento:
Se comprobarán todas las funcionalidades del sistema. En este caso, cuando se decida
inyectar se capturará en destino para comprobar la corrección de las distribuciones de
tráfico y de tamaño de paquetes y la correcta temporización. Es importante comprobar
también la característica de inyección por varios interfaces con varios inyectores
operando a la vez.
Conclusión:
La prueba concluye cuando se comprueba que el funcionamiento del prototipo es
estable.
